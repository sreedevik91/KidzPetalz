<%-include("../layout/adminHeader.ejs")%>


    <main id="main" class="main">
        <div style="display: flex;">
            <div style="width: 50%;">
                <a class="btn btn-success" href="addCategory">Add Category</a>
            </div>
            <div class="float-end text-end" style="width: 50%;">
                <form action="">
                    <input type="text" placeholder="Search category by name,description" name="search" style="width:250px;height:35px;border-radius:10px;padding-left: 20px;">
                    <input type="submit" class="btn btn-primary" value="Search">
                  </form>
            </div>
        </div>
      
        <div class="row mt-5">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Description</th>
                        <th scope="col">Image</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% data.forEach((item)=>{
                        %>
                        <tr>
                            <td>
                                <%=item.name%>
                            </td>
                            <td>
                                <%=item.description%>
                            </td>
                            <td>
                                <img src="/categoryImages/<%=item.image%>" alt="<%=item.image%>" width="50px" height="50px">  
                            </td>
                            
                            <td>
                                <a class="btn btn-info" href="editCategory?id=<%=item._id%>">Edit</a>
                                    <% 
                                    if(item.is_listed===true){
                                        %> 
                                        <a class="btn btn-warning" href="unlistCategory?id=<%=item._id%>">Unlist</a> 
                                        <%
                                    }else
                                    {
                                        %> 
                                        <a class="btn btn-warning" href="listCategory?id=<%=item._id%>">List</a> 
                                        <%
                                    }                                   
                                    %>
                            </td>
                        </tr>

                        <% }) %>
                </tbody>

            </table>

        </div>

        <div class="mt-3 text-center">
           <a href="?search=<%=search%>&page=<%= previous%>">Previous</a>
           
            <%
            for(let i=1;i<=totalPages;i++){
                %>
                <a href="?search=<%=search%>&page=<%= i %>"><%= i %></a> 
                <%
            }
            %>
            
            <a href="?search=<%=search%>&page=<%= next%>">Next</a>
        </div>
    </main>

    <%-include("../layout/adminFooter.ejs")%>