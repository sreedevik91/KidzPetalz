<%-include("../layout/adminHeader.ejs")%>


    <main id="main" class="main">

        <h3><strong>Add Product</strong></h3>

        <form action="" method="post" class="mt-5" enctype="multipart/form-data">
            <div class="form-group">
                <label for="recipient-name1" class="col-form-label">Title</label>
                <input type="text" class="form-control" placeholder="Enter Product Name " name="title" id="recipient-name1" required="">
            </div>
            <div class="form-group">
                <label for="recipient-desc" class="col-form-label"><u>Description</u></label>
                <br><br>
                <div>
                    <label class="col-form-label">Size</label>
                    <input type="text" class="form-control" placeholder="Enter Size" name="size1" required="">
                    <input type="text" class="form-control" placeholder="Enter Size" name="size2">
                    <input type="text" class="form-control" placeholder="Enter Size" name="size3">
                    <input type="text" class="form-control" placeholder="Enter Size" name="size4">
                    <input type="text" class="form-control" placeholder="Enter Size" name="size5">
                    <input type="text" class="form-control" placeholder="Enter Size" name="size6">


                    <label class="col-form-label">Color</label>
                    <input type="text" class="form-control" placeholder="Enter color" name="color" required="">
                    <label class="col-form-label">Material</label>
                    <input type="text" class="form-control" placeholder="Enter material" name="material" required="">
                    <label class="col-form-label">Type</label>
                    <input type="text" class="form-control" placeholder="Enter material" name="type" required="">
                    <label class="col-form-label">Description</label>
                    <input type="text" class="form-control" placeholder="Enter description" name="description" required="">
                </div>
            </div>

            <div class="form-group">
                <label for="recipient-tags" class="col-form-label">Tags</label>
                <input type="text" class="form-control" placeholder="Enter Tag" name="tag1" id="recipient-tags" >
                <input type="text" class="form-control" placeholder="Enter Tag" name="tag2" id="recipient-tags" >
                <input type="text" class="form-control" placeholder="Enter Tag" name="tag3" id="recipient-tags" >
                <input type="text" class="form-control" placeholder="Enter Tag" name="tag4" id="recipient-tags" >
                <input type="text" class="form-control" placeholder="Enter Tag" name="tag5" id="recipient-tags" >
                <input type="text" class="form-control" placeholder="Enter Tag" name="tag6" id="recipient-tags" >
            </div>
            <div class="form-group">
                <label for="recipient-price" class="col-form-label">Actual Price</label>
                <input type="number" class="form-control" placeholder="Enter Price " name="actualPrice" id="recipient-price" required="">
            </div>
            <div class="form-group">
                <label for="recipient-discount" class="col-form-label">Discount</label>
                <input type="text" class="form-control" placeholder="Enter Discount" name="discount" id="recipient-discount" required="">
            </div>
            <div class="form-group">
                <label for="recipient-discount" class="col-form-label">Discounted Price</label>
                <input type="text" class="form-control" placeholder="Enter Discount" name="discountedPrice" id="recipient-discount" required="">
            </div>
            <div class="form-group">
                <label for="recipient-quantity" class="col-form-label">Quantity</label>
                <input type="number" class="form-control" placeholder="Enter Quantity " name="quantity" id="recipient-quantity" required="">
            </div>
            <div class="form-group">
                <label for="recipient-category" class="col-form-label">Category ID</label>
                <input type="text" class="form-control" placeholder="Enter Category ID" name="categoryid" id="recipient-category" required="">
            </div>

            <div class="form-group">
                <label for="image" class="col-form-label">Image</label>
                <span id="container" class="d-flex position-relative m-1 mb-1"></span>
                <input type="file" class="form-control" name="images" multiple id="image" required="" onchange="getImage()">
            
            </div>
            <div style="display: flex;">
                <div class="form-group">
                    <input type="submit" class="btn btn-success mt-4" value="Add Product">
                </div>
                <div class="form-group ms-5">
                    <a href="product" class="btn btn-primary mt-4" style="width:100px">Cancel</a>
                </div>
            </div>
        </form>


        <div>
            <p>
                <span style="color: red;">
                    <%= message %>
                </span>
            </p>
        </div>


    </main>

    <script>
        let images=[]
        function getImage(){
            images=[]
            let image=document.getElementById('image').files
            console.log(image)
            for(let i=0;i<image.length;i++){
                images.push({
                    name:image[i].name,
                    url:URL.createObjectURL(image[i])
                })
            }
            // document.getElementById('container').innerHTML=" "
            // let div=document.getElementById('container')
            // while(div.firstChild) { 
            //     div.removeChild(div.firstChild); 
            // } 

            document.getElementById('container').innerHTML=showImage()
        }

        function showImage(){
            let image=''

            images.forEach((item=>{
                image +=`
                <img src="${item.url}" alt="" width="50 px" height="50 px" id="imageView">
                <a><span class="position-relative" style="top: -18px;right: 2px;cursor:pointer" onclick="deleteImage(${images.indexOf(item)})">&times;</span></a>
                `
            }))

            return image
        }

        function deleteImage(i){
            images.splice(i,1)
            document.getElementById('container').innerHTML=showImage()
        }

    </script>

    <%-include("../layout/adminFooter.ejs")%>